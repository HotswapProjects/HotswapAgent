{
  "name": "Hotswapagent",
  "tagline": "Java unlimited redefinition of classes at runtime.",
  "body": "Hotswap Agent\r\n=============\r\n\r\n[![Gitter](https://badges.gitter.im/Join%20Chat.svg)](https://gitter.im/HotswapProjects/user) [![Build Status](https://travis-ci.org/HotswapProjects/HotswapAgent.svg?branch=master)](https://travis-ci.org/HotswapProjects/HotswapAgent)\r\n\r\nJava unlimited runtime class and resource redefinition.\r\n\r\nThe main purpose of this project is to avoid infamous change->restart + *wait*->check development lifecycle.\r\nSave&Reload during development should be standard and many other languages (including C#) contain this feature.\r\n\r\nThis project is still in a beta version.\r\n\r\n### Easy to start\r\nDownload and install latest [DCEVM Java patch](https://github.com/dcevm/dcevm/releases) +\r\n[agent jar](https://github.com/HotswapProjects/HotswapAgent/releases) and launch your application server\r\nwith options `-XXaltjvm=dcevm -javaagent:hotswap-agent.jar` to get basic setup. You can attach [agent jar](https://github.com/HotswapProjects/HotswapAgent/releases) to the running JVM using the following example [code snippet](https://gist.github.com/xnike/a268fc209df52bf1bf09a268e97cef53). Optionally add hotswap-agent.properties to your application to configure plugins and agent behaviour.\r\n\r\n### Plugins\r\nEach application framework (Spring, Hibernate, Logback, ...) needs special reloading mechanism to keep\r\nup-to-date after class redefinition (e.g. Hibernate configuration reload after new entity class is introduced).\r\nHotswap agent works as a plugin system and ships preconfigured with all major framework plugins. It is easy\r\nto write your custom plugin even as part of your application.\r\n\r\n### Contribute\r\nThis project is very complex due to lot of supported frameworks and various versions. Community contribution\r\nis mandatory to keep it alive. You can start by creating a plugin inside your application or by writing an\r\nexample/integration test. There is always need for documentation improvement :-). Thank you for any help!\r\n\r\n\r\nQuick start:\r\n===========\r\n### Install\r\n1. download [latest release of DCEVM Java patch](https://github.com/dcevm/dcevm/releases) and launch the installer\r\n(e.g. `java -jar installer-light.jar`). Currently you need to select correct installer for Java major version (7/8).\r\n1. select java installation directory on your disc and press \"Install DCEVM as altjvm\" button. Java 1.7+ versions are supported.\r\n1. download [latest release of Hotswap agent jar](https://github.com/HotswapProjects/HotswapAgent/releases),\r\nunpack `hotswap-agent.jar` and put it anywhere on your disc. For example: `C:\\java\\hotswap-agent.jar`\r\n\r\n### Run your application\r\n1. add following command line java attributes: `-XXaltjvm=dcevm -javaagent:PATH_TO_AGENT\\hotswap-agent.jar` (you\r\nneed to replace PATH_TO_AGENT with an actual) directory. For example `java -XXaltjvm=dcevm -javaagent:c:\\java\\hotswap-agent.jar YourApp`.\r\n  See [IntelliJ IDEA](https://groups.google.com/forum/#!topic/hotswapagent/BxAK_Clniss)\r\n  and [Netbeans](https://groups.google.com/forum/#!topic/hotswapagent/ydW5bQMwQqU) forum threads for IDE specific setup guides. If your application is already running, you still can attach agent jar using the example [code snippet](https://gist.github.com/xnike/a268fc209df52bf1bf09a268e97cef53).\r\n1. (optional) create a file named \"hotswap-agent.properties\" inside your resources directory, see available properties and\r\n  default values: <https://github.com/HotswapProjects/HotswapAgent/blob/master/hotswap-agent-core/src/main/resources/hotswap-agent.properties>\r\n1. start the application in debug mode, check that the agent and plugins are initialized correctly:\r\n\r\n        HOTSWAP AGENT: 9:49:29.548 INFO (org.hotswap.agent.HotswapAgent) - Loading Hotswap agent - unlimited runtime class redefinition.\r\n        HOTSWAP AGENT: 9:49:29.725 INFO (org.hotswap.agent.config.PluginRegistry) - Discovered plugins: [org.hotswap.agent.plugin.hotswapper.HotswapperPlugin, org.hotswap.agent.plugin.jvm.AnonymousClassPatchPlugin, org.hotswap.agent.plugin.hibernate.HibernatePlugin, org.hotswap.agent.plugin.spring.SpringPlugin, org.hotswap.agent.plugin.jetty.JettyPlugin, org.hotswap.agent.plugin.tomcat.TomcatPlugin, org.hotswap.agent.plugin.zk.ZkPlugin, org.hotswap.agent.plugin.logback.LogbackPlugin]\r\n        ...\r\n        HOTSWAP AGENT: 9:49:38.700 INFO (org.hotswap.agent.plugin.spring.SpringPlugin) - Spring plugin initialized - Spring core version '3.2.3.RELEASE'\r\n1. save a changed resource and/or use the HotSwap feature of your IDE to reload changes\r\n\r\n### What is available?\r\n* Enhanced Java Hotswap - change method body, add/rename a method, field, ... The only unsupported operation\r\n  is hierarchy change (change the superclass or remove an interface).\r\n    * You can use standard Java Hotswap from IDE in debug mode to reload changed class\r\n    * or set autoHotswap property `-XXaltjvm=dcevm -javaagent:PATH_TO_AGENT\\hotswap-agent.jar=autoHotswap=true` to reload\r\n    changed classes after compilation. This setup allows even reload on production system without restart.\r\n* Automatic configuration - all local classes and resources known to the running Java application are automatically\r\n  discovered and watched for reload (all files on local filesystem, not inside JAR file).\r\n* Extra classpath - Need change a runtime class inside dependent JAR? Use extraClasspath property to add any directory\r\nas a classpath to watch for class files.\r\n* Reload resource after a change - resources from webapp directory are usually reloaded by application server. But what about\r\n  other resources like src/main/resources? Use watchResources property to add any directory to watch for a resource change.\r\n* Framework support - through plugin system, many frameworks are supported. New plugins can be easily added.\r\n* Fast - until the plugin is initialized, it does not consume any resources or slow down the application (see Runtime overhead for more information)\r\n\r\nShould you have any problems or questions, ask at [HotswapAgent forum](https://groups.google.com/forum/#!forum/hotswapagent).\r\n\r\nThis project is similar to [JRebel](http://zeroturnaround.com/software/jrebel/). Main differences are:\r\n\r\n* HotswapAgent (DCEVM) supports Java8!\r\n* HotswapAgent does not need any additional configuration for basic project setup.\r\n* JRebel is currently more mature and contains more plugins.\r\n* JRebel is neither open source nor free.\r\n* JRebel modifies bytecode of all classes on reload. You need special IDE plugin to fix debugging.\r\n* HotswapAgent extraClasspath is similar to JRebel <classpath> configuration\r\n* HotswapAgent adds watchResources configuration\r\n\r\n### Examples\r\nSee [HotswapAgentExamples](https://github.com/HotswapProjects/HotswapAgentExamples) GitHub project.\r\nThe purpose of an example application is:\r\n\r\n* complex automate integration tests (check various configurations before a release, see `run-tests.sh` script)\r\n* to check \"real world\" plugin usage during plugin development (i.e. inside container)\r\n* to provide working solution for typical application setups\r\n* sandbox to simulate issues for existing or new setups\r\n\r\nFeel free to fork/branch and create an application for your setup (functional, but as simple as possible).\r\nGeneral setups will be merged into the master.\r\n\r\n### IDE support\r\nNone needed :) Really, all changes are transparent and all you need to do is to download patch+agent and\r\nsetup your application / application server. Because we use standard java hotswap behaviour, your IDE will\r\nwork as expected. However, we work on IDE plugins to help with download & configuration.\r\n\r\nConfiguration\r\n=============\r\nThe basic configuration set to reload classes and resources from classpath known to the running application\r\n(classloader). If you need a different configuration, add hotswap-agent.properties file to the classpath root\r\n(e.g. `src/main/resources/hotswap-agent.properties`).\r\n\r\nDetail documentation of available properties and default values can be found in the [agent properties file](https://github.com/HotswapProjects/HotswapAgent/blob/master/hotswap-agent-core/src/main/resources/hotswap-agent.properties)\r\n\r\n### Hotswap agent command line options\r\nFull syntax of command line options is:\r\n\r\n    -javaagent:[yourpath/]hotswap-agent.jar=[option1]=[value1],[option2]=[value2]\r\n\r\nHotswap agent accepts following options:\r\n\r\n* autoHotswap=true - watch all .class files for change and automatically Hotswap the class in the running application\r\n (instead of running Hotswap from your IDE debugging session)\r\n* disablePlugin=[pluginName] - disable a plugin. Note that this will completely forbid the plugin to load\r\n    (opposite to disablePlugin option in hotswap-agent.properties, which will only disable the plugin for a classloader.\r\n    You can repeat this option for every plugin to disable.\r\n\r\n\r\nHow does it work?\r\n=================\r\n\r\n### DCEVM\r\nHotswap agent does the work of reloading resources and framework configuration (Spring, Hibernate, ...),\r\nbut it depends on standard Java hotswap mechanism to actually reload classes. Standard Java hotswap allows\r\nonly method body change , which makes it practically unusable. DCEVM is a JRE patch witch allows almost any\r\nstructural class change on hotswap (with an exception of a hierarchy change). Although hotswap agent works\r\neven with standard java, we recommend to use DCEVM (and all tutorials use DCEVM as target JVM).\r\n\r\n### Hotswap agent\r\nHotswap agent is a plugin container with plugin manager, plugin registry, and several agent services\r\n(e.g. to watch for class/resource change). It helps with common tasks and classloading issues. It scans classpath\r\nfor class annotated with @Plugin annotation, injects agent services and registers reloading hooks. Runtime bytecode\r\nmodification is provided by javaasist library.\r\n\r\n### Plugins\r\nPlugins administered by Hotswap agent are usually targeted towards a specific framework. For example Spring plugin\r\nuses agent services to:\r\n\r\n* Modify root Spring classes to get Spring contexts and registered scan path\r\n* Watch for any resource change on a scan path\r\n* Watch for a hotswap of a class file within a scan path package\r\n* Reload bean definition after a change\r\n* ... and many other\r\n\r\nPackaged plugins:\r\n\r\n* Hibernate (3x,4x) - Reload Hibernate configuration after entity create/change.\r\n* Spring (3x, 4.x) - Reload Spring configuration after class definition/change.\r\n* Jetty - add extra classpath to the app classloader. All versions supporting WebAppContext.getExtraClasspath should be supported.\r\n* Tomcat (7.x, 8.x) configure Apache Tomcat with extraClasspath property.\r\n* Jersey\r\n* ZK (5x-7x) - ZK Framework (http://www.zkoss.org/). Change library properties default values to disable caches, maintains Label cache and\r\nbean resolver cache.\r\n* Logback - Logback configuration reload\r\n* Log4j2 - Log4j2 configuration reload\r\n* Hotswapper - Watch for any class file change and reload (hotswap) it on the fly via Java Platform Debugger Architecture (JPDA)\r\n* AnonymousClassPatch - Swap anonymous inner class names to avoid not compatible changes.\r\n* ELResolver 2.2 (JuelEL, Appache Commons EL, Oracle EL 3.0)- clear ELResolver cache on class change. Support hotswap for #{...} expressions.\r\n* Seam (2.2, 2.3) - flush JBoss reference cache. Support for properties file change (messages[])\r\n* JBossModules - add extra class path to JBoss's module class loader.\r\n* JSF (mojarra 2.1, 2.2, MyFaces 2.2) - support for application resource bundle changes (properties files).\r\n* OsgiEquinox - Hotswap support for Eclipse plugin or Eclipse platform development.\r\n* RestEasy (2.x, 3.x) - Implemented by ResteasyRegistry plugin. Cleanups and registers class redefinitions.\r\n* CDI/Weld - reload bean class definition after class create(managed beans)/change. Proxy bean redefinition after proxied class change. EAR support. Bean reloading according strategy specified by parameter 'weld.beanReloadStrategy' in config file.\r\n* Deltaspike (1.x) - messages,ViewConfig, repository, proxy reloading.\r\n* WebObjects - Clear key value coding, component, action and validation caches after class change.\r\n* WildFlyELResolver - Clear BeanELResolver after any class redefinition.\r\n* Proxy (supported com.sun.proxy, CGlib) - redefines proxy classes that implement or extend changed interfaces or classes.\r\n\r\nFind a detail documentation of each plugin in the plugin project main README.md file.\r\n\r\n### Runtime overhead\r\nIt really depends on how many frameworks you use and which caches are disabled. Example measurements\r\nfor a large, real world enterprise application based on Spring + Hibernate, run on Jetty.\r\n\r\n    Setup                        | Startup time\r\n    -----------------------------|-------------\r\n    Run (plain Java)             | 23s\r\n    Debug (plain Java)           | 24s\r\n    Debug (plain DCEVM)          | 28s\r\n    Agent - disabled all plugins | 31s\r\n    Agent - all plugins          | 35s\r\n\r\n\r\nHow to write a plugin\r\n=====================\r\nYou can write plugin directly as a part of your application. Set `pluginPackages=your.plugin.package` inside\r\nyour `hotswap-agent.properties` configuration to discover `@Plugin` annotated classes. You will also need\r\nagent JAR dependency to compile, but be careful NOT to add the JAR to your application, it must be loaded only\r\nas a javaagent. Maven dependency:\r\n\r\n        <dependency>\r\n            <groupId>org.hotswap.agent</groupId>\r\n            <artifactId>HotswapAgent</artifactId>\r\n            <version>${project.version}</version>\r\n            <scope>provided</scope>\r\n        </dependency>\r\n(Note that the JAR is not yet in central maven repository - you need to build it from source first).\r\n\r\nSee [ExamplePlugin](https://github.com/HotswapProjects/HotswapAgentExamples/blob/master/SpringHibernate/src/main/java/org/hotswap/agent/it/plugin/ExamplePlugin.java)\r\n(part of TestApplication) to go through a commented simple plugin. Read [agent readme](https://github.com/HotswapProjects/HotswapAgent/blob/master/README.md)\r\n to understand agent concepts. Check existing plugins source code for more examples.\r\n\r\n\r\nCreating Release\r\n================\r\nLaunch `run-tests.sh` script in the main directory. Currently you have to setup JAVA_HOME location directory manually.\r\nAt least Java 7 and Java 8 with DCEVM should be checked before a release. All automatic tests are set to fail\r\nthe whole script in case of any single test failure.\r\n\r\nGo to directory representing repository root. In case DCEVM is named `dcevm`\r\n\r\n    mvn release:prepare\r\n    mvn release:perform\r\n\r\nIn case your DCEVM is named differently i.e. `server`\r\n\r\n    mvn release:prepare -Darguments=\"-Ddcevm=server\"\r\n    mvn release:perform -Darguments=\"-Ddcevm=server\"\r\n\r\nPlugin specific settings\r\n========================\r\n\r\n### OsgiEquinox / Eclipse RCP\r\nOsgiEquinox / Eclipse plugin provides hotswap support for Eclipse plugin or Eclipse platform development\r\n(Do not confuse it with common development in Eclipse!).\r\n\r\nFollowing options should be setup in eclipse.ini for debugee Eclipse instance:\r\n\r\n     # use application classloader for the framework\r\n    -Dosgi.frameworkParentClassloader=app\r\n     # development classpath that is added to each plugin classpath\r\n    -Dosgi.dev=[extra_classpath]\r\n     # use dcevm as JVM\r\n    -XXaltjvm=dcevm\r\n     # enable hotswapagent\r\n    -javaagent:PATH_TO_AGENT/hotswap-agent.jar\r\n     # enable remote debugging on port 8000\r\n    -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8000\r\n\r\nextra_classpath points to directory with compiled classes. When a new class is compiled it is sent by remote debugger to HotswapAgent. HotswapAgent\r\nstores this file into extra_classpath directory.\r\n\r\nIt is also necessary to setup following hotswap-agent.properties:\r\n\r\n    extraClasspath=[extra_classpath]\r\n    osgiEquinox.debugMode=true\r\n\r\nthen connect the IDE debugger (eclipse, netbeans or idea) to port 8000 and happy hotswapping!\r\n\r\nCredits\r\n=======\r\nHotswap agent:\r\n\r\n* Jiri Bubnik - project coordinator, initial implementation\r\n* Alexandros Papadakis - Maven Versioning, Weld, JSF, Hibernate3, RestEasy, WildFly plugins\r\n* Erki Ehtla - Spring plugin, Proxy plugin\r\n* Vladimir Dvorak - Seam, ELResolver, JSF, OsgiEquinox, Weld, Deltaspike, JavaBean, JBossModules  plugins\r\n* Sergey Lysenko - Weld plugin\r\n* Samuel Pelletier - WebObjects plugin\r\n* Jan Tecl - web design\r\n* Lukasz Warzecha - Log4j2 plugin\r\n\r\nDCEVM:\r\n\r\n* Ivan Dubrov - current project coordinator, update to Java7+Java8, patches, build system (Gradle)\r\n* Thomas Würthinger - initial implementation.\r\n* Kerstin Breitender – contributor.\r\n* Christoph Wimberger – contributor.\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}